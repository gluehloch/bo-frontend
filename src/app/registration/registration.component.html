<div>
    <h1>Registrierung</h1>
    <p>
        Starte deine Registrierung und melde dich bei deinem persönlichen
        Community Manager. Dieser sorgt dafür, dass du deiner Tippgemeinschaft
        beitreten kannst.
    </p>
    <div>
        <form name="registrationForm" novalidate>
            <div class="mb-3">
                <label for="nickname" class="sr-only form-label"
                    ng-class="{'has-warning': !registrationModel.nickname.invalid}">Nickname</label>
                <input type="text" id="nickname" name="nickname" class="form-control" placeholder="Nickname" required
                    autofocus [(ngModel)]="registrationModel.nickname.value"
                    [class.is-invalid]="registrationModel.nickname.invalid"
                    [class.is-valid]="registrationModel.nickname.valid"
                    (blur)="validateNickname()"/>
                <div *ngIf="registrationModel.nickname.message" class="invalid-feedback">
                    {{registrationModel.nickname.message}}
                </div>
            </div>
            <div class="mb-3">
                <label for="password" class="sr-only form-label">Passwort</label>
                <input type="password" name="password" id="password" class="form-control" placeholder="Password" required 
                    [(ngModel)]="registrationModel.password.value"
                    [class.is-invalid]="registrationModel.password.invalid"
                    [class.is-valid]="registrationModel.password.valid"/>
                <div *ngIf="registrationModel.password.message" class="invalid-feedback">
                    {{registrationModel.password.message}}
                </div>
            </div>
            <div class="mb-3">
                <label for="password2" class="sr-only form-label">Passwort</label>
                <input type="password" name="password2" id="password2" class="form-control" placeholder="Password Wiederholung" required
                    [(ngModel)]="registrationModel.password2.value" 
                    [class.is-invalid]="registrationModel.password2.invalid"
                    [class.is-valid]="registrationModel.password2.valid"
                    (blur)="validatePassword()"/>
                <div class="invalid-feedback">
                    {{registrationModel.password2.message}}
                </div>
            </div>
            <div class="mb-3">
                <label for="firstname" class="sr-only form-label"
                    ng-class="{'has-warning': !registrationModel.firstname.invalid}">Vorname</label>
                <input type="text" id="name" name="firstname" class="form-control" placeholder="Vorname" required
                    [(ngModel)]="registrationModel.firstname.value"
                    [class.is-invalid]="registrationModel.firstname.invalid"
                    [class.is-valid]="registrationModel.firstname.valid"
                    (blur)="validateFirstname()"/>
                <div *ngIf="registrationModel.firstname.message" class="invalid-feedback">
                    {{registrationModel.firstname.message}}
                </div>
            </div>
            <div class="mb-3">
                <label for="name" class="sr-only form-label"
                    ng-class="{'has-warning': registrationModel.name.invalid}">Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Name" required
                    [(ngModel)]="registrationModel.name.value"
                    [class.is-invalid]="registrationModel.name.invalid" 
                    [class.is-valid]="registrationModel.name.valid"
                    (blur)="validateName()"/>
                <div class="invalid-feedback">
                    {{registrationModel.name.message}}
                </div>
            </div>
            <div class="mb-3">
                <label for="email" class="sr-only form-label">EMail</label>
                <input type="email" name="email" id="email" class="form-control" placeholder="EMail"
                    required ng-class="{'has-warning': !registrationModel.email.invalid}"
                    [(ngModel)]="registrationModel.email.value"
                    [class.is-invalid]="registrationModel.email.invalid"
                    [class.is-valid]="registrationModel.email.valid"
                    (blur)="validateEmail()"/>
                <div class="invalid-feedback">
                    {{registrationModel.email.message}}
                </div>                    
            </div>
            <p>
                Den Namen der Community erhälst du von einem Community-Manager. Du solltest diesen
                persönlich kennen, damit er deine Anmeldung bestätigen kann.
            </p>
            <div class="mb-3">
                <label for="community" class="sr-only form-label">Community</label>
                <input type="text" name="community" id="community" class="form-control" placeholder="Community"
                    required ng-class="{'has-warning': !registrationModel.community.invalid}"
                    [(ngModel)]="registrationModel.community.value"
                    [class.is-invalid]="registrationModel.community.invalid"
                    [class.is-valid]="registrationModel.community.valid"
                    (blur)="validateCommunity()"/>
                <div class="invalid-feedback">
                    {{registrationModel.community.message}}
                </div>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="acceptEmail" id="acceptEmail"
                    [(ngModel)]="registrationModel.acceptEmail" required
                    [class.is-invalid]="registrationModel.acceptEmailInvalid"
                    (blur)="validateAcceptEmail()"/>
                <label class="form-check-label" for="acceptEmail">
                    Meine Email Adresse darf gespeichert werden und wird zur Kommunikation
                    im Zusammenhang mit dem Tippspiel verwendet.
                </label>
                <div class="invalid-feedback">
                    Bitte ankreuzen.
                </div>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="acceptCookie" id="acceptCookie"
                    [(ngModel)]="registrationModel.acceptCookie" required
                    [class.is-invalid]="registrationModel.acceptCookieInvalid"
                    (blur)="validateAcceptCookie()"/>
                <label class="form-check-label" for="acceptCookie">
                    Es dürfen Cookies gespeichert werden. Diese identifizieren den Teilnehmer,
                    sammeln Informationen über die Benutzerfreundlichkeit des Tippspiels
                    und sind für die Funktion des Tippspiels notwendig.
                </label>
                <div class="invalid-feedback">
                    Bitte ankreuzen.
                </div>                
            </div>
<p></p>
            <div *ngIf="registrationModel.formState === EnumFormState.TransmissionOk" class="alert alert-success" role="alert">
                <h4 class="alert-heading">Registrierung abgeschlossen!</h4>
                <p>
                    Der Community Manager wird sich mit dir kurzfristig(?) in Verbindung setzen und dich
                    für die Tipprunde freischalten. Falls die Freischaltung auf sich warten lässt,
                    kontaktiere den Community Manager bitte direkt.
                </p>
                <hr>
                <p class="mb-0">
                    Viel Spaß und viel Erfolg.
                </p>
            </div>
<p></p>
            <div *ngIf="registrationModel.formState === EnumFormState.TransmissionError" class="alert alert-warning" role="alert">
                Der Registrierungswunsch konnte nicht bearbeitet werden. Bitte prüfe die
                angezeigten Fehlermeldungen.
            </div>            
<p></p>
            <div *ngIf="registrationModel.progressState === EnumProgressState.TransmissionStart" class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated"
                    role="progressbar" [style.witdh.%]="registrationModel.progressState"
                    aria-valuenow="registrationModel.progressState"
                    aria-valuemin="0"
                    aria-valuemax="100"></div>
            </div>
<p></p>

            <div class="btn-group" role="group" *ngIf="registrationModel.formState !== EnumFormState.TransmissionOk">
                <button [disabled]="registrationModel.formState === EnumFormState.TransmissionStart"
                    class="btn btn-primary btn-block" type="submit"
                    (click)="startRegistration()">Anmeldung Starten</button>
                <button class="btn btn-secondary btn-block" (click)="reset()">Zurücksetzen</button>
            </div>
        </form>

    </div>    
</div>