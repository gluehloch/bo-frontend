<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h1 class="mb-4">
        <i class="bi bi-bug"></i> Issue List
      </h1>
      
      <!-- Open Issues Section -->
      <div class="card mb-4">
        <div class="card-header bg-success text-white">
          <h3 class="mb-0">
            <i class="bi bi-circle-fill me-2"></i>
            Offene Issues ({{ getIssuesByState('open').length }})
          </h3>
        </div>
        <div class="card-body">
          <div *ngIf="getIssuesByState('open').length === 0" class="alert alert-info">
            <i class="bi bi-info-circle me-2"></i>
            Keine offenen Issues vorhanden.
          </div>
          
          <div *ngFor="let issue of getIssuesByState('open')" class="issue-item border-bottom pb-3 mb-3">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h5 class="mb-1">
                  <a [href]="issue.html_url" target="_blank" class="text-decoration-none">
                    #{{ issue.number }} {{ issue.title }}
                    <i class="bi bi-box-arrow-up-right ms-1 small"></i>
                  </a>
                </h5>
                
                <div class="mb-2">
                  <span class="badge bg-primary me-2">{{ getIssueTypeLabel(issue) }}</span>
                  <span class="badge bg-success me-2">{{ issue.state }}</span>
                  <span *ngFor="let label of issue.labels" 
                        class="badge me-1"
                        [style.background-color]="'#' + label.color">
                    {{ label.name }}
                  </span>
                </div>
                
                <div class="text-muted small">
                  <i class="bi bi-clock me-1"></i>
                  Erstellt: {{ issue.created_at | date:'dd.MM.yyyy HH:mm' }}
                  <span *ngIf="issue.updated_at !== issue.created_at" class="ms-3">
                    <i class="bi bi-arrow-repeat me-1"></i>
                    Zuletzt aktualisiert: {{ issue.updated_at | date:'dd.MM.yyyy HH:mm' }}
                  </span>
                </div>
                
                <div *ngIf="issue.assignees.length > 0" class="mt-2">
                  <small class="text-muted">
                    <i class="bi bi-person me-1"></i>
                    Zugewiesen an: 
                    <span *ngFor="let assignee of issue.assignees; let last = last">
                      {{ assignee.login }}<span *ngIf="!last">, </span>
                    </span>
                  </small>
                </div>
                
                <div *ngIf="issue.body" class="mt-2">
                  <div class="collapse" [id]="'collapse-' + issue.number">
                    <div class="card card-body bg-light">
                      <pre class="mb-0 small">{{ issue.body }}</pre>
                    </div>
                  </div>
                  <button class="btn btn-sm btn-outline-secondary mt-1" 
                          type="button" 
                          [attr.data-bs-toggle]="'collapse'"
                          [attr.data-bs-target]="'#collapse-' + issue.number">
                    <i class="bi bi-chevron-down me-1"></i>
                    Details anzeigen
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Closed Issues Section -->
      <div class="card">
        <div class="card-header bg-secondary text-white">
          <h3 class="mb-0">
            <i class="bi bi-check-circle-fill me-2"></i>
            Geschlossene Issues ({{ getIssuesByState('closed').length }})
          </h3>
        </div>
        <div class="card-body">
          <div *ngIf="getIssuesByState('closed').length === 0" class="alert alert-info">
            <i class="bi bi-info-circle me-2"></i>
            Keine geschlossenen Issues vorhanden.
          </div>
          
          <div *ngFor="let issue of getIssuesByState('closed')" class="issue-item border-bottom pb-3 mb-3">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h5 class="mb-1">
                  <a [href]="issue.html_url" target="_blank" class="text-decoration-none text-muted">
                    #{{ issue.number }} {{ issue.title }}
                    <i class="bi bi-box-arrow-up-right ms-1 small"></i>
                  </a>
                </h5>
                
                <div class="mb-2">
                  <span class="badge bg-primary me-2">{{ getIssueTypeLabel(issue) }}</span>
                  <span class="badge bg-secondary me-2">{{ issue.state }}</span>
                  <span *ngFor="let label of issue.labels" 
                        class="badge me-1"
                        [style.background-color]="'#' + label.color">
                    {{ label.name }}
                  </span>
                </div>
                
                <div class="text-muted small">
                  <i class="bi bi-clock me-1"></i>
                  Erstellt: {{ issue.created_at | date:'dd.MM.yyyy HH:mm' }}
                  <span *ngIf="issue.updated_at !== issue.created_at" class="ms-3">
                    <i class="bi bi-arrow-repeat me-1"></i>
                    Zuletzt aktualisiert: {{ issue.updated_at | date:'dd.MM.yyyy HH:mm' }}
                  </span>
                </div>
                
                <div *ngIf="issue.assignees.length > 0" class="mt-2">
                  <small class="text-muted">
                    <i class="bi bi-person me-1"></i>
                    Zugewiesen an: 
                    <span *ngFor="let assignee of issue.assignees; let last = last">
                      {{ assignee.login }}<span *ngIf="!last">, </span>
                    </span>
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>